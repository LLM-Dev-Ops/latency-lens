# LLM-Latency-Lens Production Environment Configuration
# --------------------------------------------------
# This file defines REQUIRED environment variables for deployment.
# Secrets should be stored in Google Secret Manager, not in this file.
#
# ARCHITECTURE CONSTRAINTS:
# - No agent hardcodes service names or URLs
# - No agent embeds credentials, secrets, or optimization logic
# - All dependencies resolve via environment variables or Secret Manager

# --------------------------------------------------
# 1. PLATFORM CONFIGURATION
# --------------------------------------------------
platform:
  # Environment (dev | staging | prod)
  PLATFORM_ENV: prod

  # Service identification
  SERVICE_NAME: llm-latency-lens
  SERVICE_VERSION: "0.1.0"

  # Region
  REGION: us-central1

# --------------------------------------------------
# 2. RUVECTOR SERVICE (Persistence Layer)
# --------------------------------------------------
# LLM-Latency-Lens does NOT connect directly to Google SQL.
# All persistence occurs via ruvector-service client calls.
ruvector:
  # RuVector service URL (stored in Secret Manager)
  # Secret: llm-latency-lens-ruvector-url
  RUVECTOR_SERVICE_URL: "projects/agentics-dev/secrets/llm-latency-lens-ruvector-url/versions/latest"

  # RuVector API key (stored in Secret Manager)
  # Secret: llm-latency-lens-ruvector-key
  RUVECTOR_API_KEY: "projects/agentics-dev/secrets/llm-latency-lens-ruvector-key/versions/latest"

  # Request timeout
  RUVECTOR_TIMEOUT_SECS: "30"

  # Max retries
  RUVECTOR_MAX_RETRIES: "3"

# --------------------------------------------------
# 3. TELEMETRY (LLM-Observatory Integration)
# --------------------------------------------------
telemetry:
  # Telemetry endpoint for LLM-Observatory
  # Secret: llm-latency-lens-telemetry-endpoint
  TELEMETRY_ENDPOINT: "projects/agentics-dev/secrets/llm-latency-lens-telemetry-endpoint/versions/latest"

  # OpenTelemetry configuration
  OTEL_SERVICE_NAME: llm-latency-lens
  OTEL_EXPORTER_OTLP_PROTOCOL: grpc

  # Sampling rate (1.0 = 100%)
  OTEL_TRACES_SAMPLER_ARG: "1.0"

# --------------------------------------------------
# 4. LOGGING
# --------------------------------------------------
logging:
  RUST_LOG: "info,llm_latency_lens=debug"
  RUST_BACKTRACE: "1"

# --------------------------------------------------
# 5. SERVICE MESH / NETWORKING
# --------------------------------------------------
networking:
  # Port for HTTP server
  PORT: "8080"

  # Request timeout
  REQUEST_TIMEOUT_SECS: "300"

  # Keep-alive timeout
  KEEP_ALIVE_SECS: "60"

# --------------------------------------------------
# 6. CLOUD RUN SPECIFIC
# --------------------------------------------------
cloudrun:
  # CPU allocation
  CPU: "2"
  MEMORY: "2Gi"

  # Scaling
  MIN_INSTANCES: "0"
  MAX_INSTANCES: "10"

  # Concurrency
  CONCURRENCY: "80"

  # Execution environment (gen1 | gen2)
  EXECUTION_ENVIRONMENT: gen2

# --------------------------------------------------
# SECRETS REFERENCE (stored in Secret Manager)
# --------------------------------------------------
# The following secrets must be created in Secret Manager:
#
# 1. llm-latency-lens-ruvector-url
#    Description: RuVector service endpoint URL
#    Example: https://ruvector-service-xxxxx.run.app
#
# 2. llm-latency-lens-ruvector-key
#    Description: API key for RuVector service authentication
#
# 3. llm-latency-lens-telemetry-endpoint
#    Description: LLM-Observatory telemetry ingestion endpoint
#    Example: https://llm-observatory-xxxxx.run.app/v1/traces
#
# To create secrets:
# gcloud secrets create llm-latency-lens-ruvector-url --replication-policy=automatic
# echo -n "https://ruvector-service.run.app" | gcloud secrets versions add llm-latency-lens-ruvector-url --data-file=-
